import{_ as a,c as n,o as p,ag as e}from"./chunks/framework.DPDPlp3K.js";const u=JSON.parse('{"title":"github å·¥ä½œæµ","description":"","frontmatter":{},"headers":[],"relativePath":"diary/githubå·¥ä½œæµ.md","filePath":"diary/githubå·¥ä½œæµ.md"}'),l={name:"diary/githubå·¥ä½œæµ.md"};function i(t,s,c,o,r,h){return p(),n("div",null,s[0]||(s[0]=[e(`<h1 id="github-å·¥ä½œæµ" tabindex="-1">github å·¥ä½œæµ <a class="header-anchor" href="#github-å·¥ä½œæµ" aria-label="Permalink to &quot;github å·¥ä½œæµ&quot;">â€‹</a></h1><p>GitHub Actions æ˜¯ä¸€ç§æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ (CI/CD) å¹³å°ï¼Œå¯ç”¨äºè‡ªåŠ¨æ‰§è¡Œç”Ÿæˆã€æµ‹è¯•å’Œéƒ¨ç½²ç®¡é“ã€‚ ä½ å¯ä»¥åˆ›å»ºå·¥ä½œæµï¼Œä»¥ä¾¿åœ¨æ¨é€æ›´æ”¹åˆ°å­˜å‚¨åº“æ—¶è¿è¡Œæµ‹è¯•ï¼Œæˆ–å°†åˆå¹¶çš„æ‹‰å–è¯·æ±‚éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p><h2 id="ci-cd" tabindex="-1">CI/CD <a class="header-anchor" href="#ci-cd" aria-label="Permalink to &quot;CI/CD&quot;">â€‹</a></h2><p>ç¼©å†™ | å…¨ç§° | ä¸­æ–‡å«ä¹‰ | åŠŸèƒ½ CI | Continuous Integration | æŒç»­é›†æˆ | å¼€å‘è€…æäº¤ä»£ç åï¼Œè‡ªåŠ¨è¿›è¡Œç¼–è¯‘ã€æµ‹è¯•ã€æ„å»ºç­‰æµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ CD | Continuous Delivery | æŒç»­äº¤ä»˜ | ä»£ç åœ¨é€šè¿‡ CI åï¼Œè‡ªåŠ¨å‡†å¤‡éƒ¨ç½²æµç¨‹ï¼Œä½†éœ€äººå·¥ç¡®è®¤å‘å¸ƒ CD | Continuous Deployment | æŒç»­éƒ¨ç½² | ä»£ç åœ¨é€šè¿‡ CI åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨æˆ–ç”Ÿäº§ç¯å¢ƒï¼Œå…¨è‡ªåŠ¨</p><h2 id="éƒ¨ç½²æµç¨‹" tabindex="-1">éƒ¨ç½²æµç¨‹ <a class="header-anchor" href="#éƒ¨ç½²æµç¨‹" aria-label="Permalink to &quot;éƒ¨ç½²æµç¨‹&quot;">â€‹</a></h2><h3 id="ç”Ÿæˆå¯†é’¥å¯¹" tabindex="-1">ç”Ÿæˆå¯†é’¥å¯¹ <a class="header-anchor" href="#ç”Ÿæˆå¯†é’¥å¯¹" aria-label="Permalink to &quot;ç”Ÿæˆå¯†é’¥å¯¹&quot;">â€‹</a></h3><p>ssh-keygen -t rsa -b 4096 -C &quot;github@actions&quot;</p><h3 id="å¯†é’¥å¯¹" tabindex="-1">å¯†é’¥å¯¹ <a class="header-anchor" href="#å¯†é’¥å¯¹" aria-label="Permalink to &quot;å¯†é’¥å¯¹&quot;">â€‹</a></h3><p>å…¬é’¥å­˜æœåŠ¡å™¨é‡Œï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.ssh/github-deploy</span></span></code></pre></div><p>ç§é’¥åŠ åˆ°githubé¡¹ç›®é‡Œçš„</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Settings -&gt; Secrets and variables -&gt; Actions -&gt; New repository secret</span></span></code></pre></div><p>ç„¶åæ·»åŠ ä¸‰ä¸ª Secretsï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SSH_HOST:æœåŠ¡å™¨ip</span></span>
<span class="line"><span>SSH_USER:root</span></span>
<span class="line"><span>SSH_KEY:ç§é’¥</span></span></code></pre></div><h3 id="é…ç½®æ–‡ä»¶" tabindex="-1">é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>name: gaga-blog</span></span>
<span class="line"><span></span></span>
<span class="line"><span>on:</span></span>
<span class="line"><span>  push:</span></span>
<span class="line"><span>    branches: [main]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jobs:</span></span>
<span class="line"><span>  build-and-deploy:</span></span>
<span class="line"><span>    runs-on: ubuntu-latest</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    steps:</span></span>
<span class="line"><span>    - name: ğŸ“¥ æ‹‰å–ä»£ç </span></span>
<span class="line"><span>      uses: actions/checkout@v3</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: ğŸ“¦ å®‰è£…ä¾èµ–</span></span>
<span class="line"><span>      run: npm ci</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: ğŸ”§ æ„å»º VitePress</span></span>
<span class="line"><span>      run: npm run docs:build</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: ğŸ—‚ï¸ æ‹·è´æ„å»ºå†…å®¹åˆ° deploy æ–‡ä»¶å¤¹</span></span>
<span class="line"><span>      run: |</span></span>
<span class="line"><span>        mkdir deploy</span></span>
<span class="line"><span>        cp -r .vitepress/dist/* deploy/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: ğŸ”¥ æ¸…ç©ºæœåŠ¡å™¨æ—§å†…å®¹</span></span>
<span class="line"><span>      uses: appleboy/ssh-action@v0.1.7</span></span>
<span class="line"><span>      with:</span></span>
<span class="line"><span>        host: \${{ secrets.SSH_HOST }}</span></span>
<span class="line"><span>        username: \${{ secrets.SSH_USER }}</span></span>
<span class="line"><span>        key: \${{ secrets.SSH_KEY }}</span></span>
<span class="line"><span>        script: rm -rf /home/html/gaga-blog/*</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: ğŸ“¤ ä¸Šä¼ æ„å»ºæ–‡ä»¶åˆ°æœåŠ¡å™¨</span></span>
<span class="line"><span>      uses: appleboy/scp-action@v0.1.7</span></span>
<span class="line"><span>      with:</span></span>
<span class="line"><span>        host: \${{ secrets.SSH_HOST }}</span></span>
<span class="line"><span>        username: \${{ secrets.SSH_USER }}</span></span>
<span class="line"><span>        key: \${{ secrets.SSH_KEY }}</span></span>
<span class="line"><span>        source: &quot;./deploy/**&quot;                 # ä½¿ç”¨åŒæ˜Ÿå·é€’å½’ä¸Šä¼ </span></span>
<span class="line"><span>        target: &quot;/home/html/gaga-blog/&quot;</span></span>
<span class="line"><span>        strip_components: 1                   # âœ… å…³é”®ï¼šå»æ‰ deploy ç›®å½•ç»“æ„</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    - name: â™»ï¸ é‡å¯ Nginx</span></span>
<span class="line"><span>      uses: appleboy/ssh-action@v0.1.7</span></span>
<span class="line"><span>      with:</span></span>
<span class="line"><span>        host: \${{ secrets.SSH_HOST }}</span></span>
<span class="line"><span>        username: \${{ secrets.SSH_USER }}</span></span>
<span class="line"><span>        key: \${{ secrets.SSH_KEY }}</span></span>
<span class="line"><span>        script: sudo systemctl restart nginx</span></span></code></pre></div><p>okï¼Œç»“æŸï¼</p><p>ä¸»è¦æ˜¯ç›®å½•çš„é—®é¢˜ï¼Œ</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  source: &quot;./deploy/**&quot;                 # ä½¿ç”¨åŒæ˜Ÿå·é€’å½’ä¸Šä¼ </span></span>
<span class="line"><span>  target: &quot;/home/html/gaga-blog/&quot;</span></span>
<span class="line"><span>  strip_components: 1                   # âœ… å…³é”®ï¼šå»æ‰ deploy ç›®å½•ç»“æ„</span></span></code></pre></div>`,19)]))}const g=a(l,[["render",i]]);export{u as __pageData,g as default};
